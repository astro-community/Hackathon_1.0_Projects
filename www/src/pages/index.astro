---
import notionData from '../data/notion.json'
import Base from '../layouts/Base.astro';
import { prettyCategoryName } from '../scripts/prettyCategoryName';

const countCategory = (category: string) => notionData.filter(i => i.Category.toLowerCase().includes(category)).length;
const counts: [string, number][] = ['theme', 'integration', 'ssr'].map(category => [category, countCategory(category)]);
---

<Base>
	<div class="container max-w-4xl mx-auto p-3 grid sm:grid-cols-2 sm:pb-16 gap-6 lg:gap-12 2xl:gap-16">
		{counts.map(([name, count], index) =>
		<div class={`card p-4 space-y-4 shadow-xl bg-base-100 ${index % 2 && 'sm:translate-y-16'}`}>
			<div class="flex justify-between items-baseline">
				<h2 class="font-bold text-xl lg:text-2xl">{prettyCategoryName(name)}</h2>
				<p class="text-sm lg:text-base"><span class="font-bold">{count}</span> Submissions</p>
			</div>
			<a href={`/${name}`} class="btn">View Entries</a>
		</div>
		)}
	</div>
	<div class="mx-auto sm:max-w-xl sm:text-center rounded-2xl sm:bg-gradient-to-tl from-primary to-secondary sm:text-primary-content p-4 sm:shadow-xl">
		<p><strong>ðŸ—³ Voting has now closed. Winners will be announced soon!</strong></p>
	</div>
	<div class="mx-auto sm:max-w-xl sm:card p-4 sm:shadow-xl sm:bg-base-100">
		<div class="prose">
			
			<p>To celebrate the upcoming release of Astro v1.0, the first Astro Hackathon ran from 8 April to 16 May 2022 with public voting ending on 27 May.</p>
			<p>We have seen a fantastic range of submissions entered from a vast range of talented developers. We truly thank them all for their effort and commend them for their labour.</p>
			<p>We encourage you to take a look over all the submissions in each category for this year's Hackathon. Winners of the $15,000 total up for grabs in prize money will be announced soon.</p>
			<p>May the best Astronauts win, and the force be with you!</p>
			<p>Find out more at <a href="https://astro.build/hack">astro.build/hack</a></p>
		</div>
	</div>
</Base>